{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\sahil\\\\OneDrive\\\\Desktop\\\\Company Secure and File duplicacy Management System\\\\client\\\\src\\\\context\\\\SocketContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport { io } from \"socket.io-client\";\nimport { useNotification } from \"./NotificationContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SocketContext = /*#__PURE__*/createContext();\nexport const useSocket = () => {\n  _s();\n  return useContext(SocketContext);\n};\n_s(useSocket, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const SocketProvider = ({\n  children\n}) => {\n  _s2();\n  const [socket, setSocket] = useState(null);\n  const [connected, setConnected] = useState(false);\n  const {\n    addNotification\n  } = useNotification();\n  useEffect(() => {\n    // Initialize socket connection\n    const socketInstance = io(\"http://localhost:5000\", {\n      transports: [\"websocket\"],\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000\n    });\n    socketInstance.on(\"connect\", () => {\n      console.log(\"Connected to socket server\");\n      setConnected(true);\n    });\n    socketInstance.on(\"disconnect\", () => {\n      console.log(\"Disconnected from socket server\");\n      setConnected(false);\n    });\n    socketInstance.on(\"file_uploaded\", data => {\n      console.log(\"File uploaded event received:\", data);\n      addNotification({\n        type: \"success\",\n        message: `File \"${data.filename}\" was uploaded successfully`,\n        timestamp: new Date(),\n        duration: 5000\n      });\n    });\n    socketInstance.on(\"duplicate_detected\", data => {\n      console.log(\"Duplicate file event received:\", data);\n      addNotification({\n        type: \"warning\",\n        message: `Duplicate file detected: \"${data.filename}\" matches an existing file`,\n        timestamp: new Date(),\n        duration: 5000\n      });\n    });\n    socketInstance.on(\"anomaly_detected\", data => {\n      console.log(\"Anomaly detected event received:\", data);\n      addNotification({\n        type: \"error\",\n        message: `Anomaly detected in file \"${data.filename}\"`,\n        timestamp: new Date(),\n        duration: 5000\n      });\n    });\n    setSocket(socketInstance);\n\n    // Cleanup on unmount\n    return () => {\n      socketInstance.disconnect();\n    };\n  }, [addNotification]);\n  const value = {\n    socket,\n    connected\n  };\n  return /*#__PURE__*/_jsxDEV(SocketContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 10\n  }, this);\n};\n_s2(SocketProvider, \"BFB9pUYHjJnL7q7S/QfUp7mz0KM=\", false, function () {\n  return [useNotification];\n});\n_c = SocketProvider;\nvar _c;\n$RefreshReg$(_c, \"SocketProvider\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","_s2","createContext","useContext","useEffect","useState","io","useNotification","jsxDEV","_jsxDEV","SocketContext","useSocket","SocketProvider","children","socket","setSocket","connected","setConnected","addNotification","socketInstance","transports","reconnection","reconnectionAttempts","reconnectionDelay","on","console","log","data","type","message","filename","timestamp","Date","duration","disconnect","value","Provider","fileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/sahil/OneDrive/Desktop/Company Secure and File duplicacy Management System/client/src/context/SocketContext.jsx"],"sourcesContent":["\"use client\"\n\nimport { createContext, useContext, useEffect, useState } from \"react\"\nimport { io } from \"socket.io-client\"\nimport { useNotification } from \"./NotificationContext\"\n\nconst SocketContext = createContext()\n\nexport const useSocket = () => {\n  return useContext(SocketContext)\n}\n\nexport const SocketProvider = ({ children }) => {\n  const [socket, setSocket] = useState(null)\n  const [connected, setConnected] = useState(false)\n  const { addNotification } = useNotification()\n\n  useEffect(() => {\n    // Initialize socket connection\n    const socketInstance = io(\"http://localhost:5000\", {\n      transports: [\"websocket\"],\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000,\n    })\n\n    socketInstance.on(\"connect\", () => {\n      console.log(\"Connected to socket server\")\n      setConnected(true)\n    })\n\n    socketInstance.on(\"disconnect\", () => {\n      console.log(\"Disconnected from socket server\")\n      setConnected(false)\n    })\n\n    socketInstance.on(\"file_uploaded\", (data) => {\n      console.log(\"File uploaded event received:\", data)\n      addNotification({\n        type: \"success\",\n        message: `File \"${data.filename}\" was uploaded successfully`,\n        timestamp: new Date(),\n        duration: 5000,\n      })\n    })\n\n    socketInstance.on(\"duplicate_detected\", (data) => {\n      console.log(\"Duplicate file event received:\", data)\n      addNotification({\n        type: \"warning\",\n        message: `Duplicate file detected: \"${data.filename}\" matches an existing file`,\n        timestamp: new Date(),\n        duration: 5000,\n      })\n    })\n\n    socketInstance.on(\"anomaly_detected\", (data) => {\n      console.log(\"Anomaly detected event received:\", data)\n      addNotification({\n        type: \"error\",\n        message: `Anomaly detected in file \"${data.filename}\"`,\n        timestamp: new Date(),\n        duration: 5000,\n      })\n    })\n\n    setSocket(socketInstance)\n\n    // Cleanup on unmount\n    return () => {\n      socketInstance.disconnect()\n    }\n  }, [addNotification])\n\n  const value = {\n    socket,\n    connected,\n  }\n\n  return <SocketContext.Provider value={value}>{children}</SocketContext.Provider>\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}